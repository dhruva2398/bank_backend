===============================
BANK BACKEND ‚Äì COMMAND CHEAT SHEET
===============================

# Assumption:
# - Backend server runs on localhost:8000
# - app.py already exists
# - Virtual environment is activated

------------------------------------------------
START BANK BACKEND SERVER
------------------------------------------------
python3 -m uvicorn app:app --host 0.0.0.0 --port 8000

------------------------------------------------
HEALTH CHECK ‚Äì IS BANK RUNNING?
------------------------------------------------
curl http://localhost:8000

Expected Output:
{"status":"Bank backend is running"}

------------------------------------------------
CREATE CUSTOMER
------------------------------------------------
curl -X POST "http://localhost:8000/customers?name=Ravi"

------------------------------------------------
VIEW ALL CUSTOMERS
------------------------------------------------
curl http://localhost:8000/customers

Expected Output Example:
{
  "customers": [
    {"id":1,"name":"Ravi"},
    {"id":2,"name":"Kumar"}
  ]
}

------------------------------------------------
CREATE ACCOUNT (USING CUSTOMER ID)
------------------------------------------------
curl -X POST "http://localhost:8000/accounts?customer_id=1"

------------------------------------------------
VIEW ALL ACCOUNTS
------------------------------------------------
curl http://localhost:8000/accounts

Expected Output Example:
{
  "accounts": [
    {"account_id":1,"customer_id":1,"balance":0}
  ]
}

------------------------------------------------
DEPOSIT MONEY
------------------------------------------------
curl -X POST "http://localhost:8000/deposit?account_id=1&amount=1000"

Expected Output:
{
  "message":"Deposit successful",
  "account_id":1,
  "balance":1000
}

------------------------------------------------
WITHDRAW MONEY
------------------------------------------------
curl -X POST "http://localhost:8000/withdraw?account_id=1&amount=300"

Expected Output:
{
  "message":"Withdrawal successful",
  "account_id":1,
  "balance":700
}

------------------------------------------------
TEST INSUFFICIENT BALANCE
------------------------------------------------
curl -X POST "http://localhost:8000/withdraw?account_id=1&amount=5000"

Expected Output:
{"error":"Insufficient balance"}

------------------------------------------------
CHECK ACCOUNT BALANCE
------------------------------------------------
curl "http://localhost:8000/balance?account_id=1"

Expected Output:
{
  "account_id":1,
  "balance":700
}

------------------------------------------------
VIEW APPLICATION LOGS
------------------------------------------------
cat logs/bank.log

------------------------------------------------
LIVE LOG MONITORING (DEVOPS)
------------------------------------------------
tail -f logs/bank.log

------------------------------------------------
STOP BANK SERVER
------------------------------------------------
CTRL + C

------------------------------------------------
REAL BANKING FLOW
------------------------------------------------
1. Create Customer
2. Get Customer ID
3. Create Account using Customer ID
4. Deposit Money
5. Withdraw Money
6. Check Balance





#############################################
# BANK BACKEND API TEST COMMANDS
#############################################

# ------------------------------------------
# 1Ô∏è‚É£ LOGIN AS ADMIN
# ------------------------------------------
curl -X POST "http://localhost:8000/login?username=admin&password=admin"


# ------------------------------------------
# 2Ô∏è‚É£ CREATE NEW CUSTOMER (ADMIN ACTION)
# ------------------------------------------
curl -X POST "http://localhost:8000/admin/create-user?username=raju&password=1234"


# ------------------------------------------
# 3Ô∏è‚É£ LOGIN AS CUSTOMER (raju)
# ------------------------------------------
curl -X POST "http://localhost:8000/login?username=raju&password=1234"


# ------------------------------------------
# 4Ô∏è‚É£ CHECK BALANCE (Assume raju user_id = 2)
# ------------------------------------------
curl "http://localhost:8000/balance?user_id=2"


# ------------------------------------------
# 5Ô∏è‚É£ DEPOSIT 500 TO CUSTOMER
# ------------------------------------------
curl -X POST "http://localhost:8000/deposit?user_id=2&amount=500"


# ------------------------------------------
# 6Ô∏è‚É£ CHECK BALANCE AGAIN
# ------------------------------------------
curl "http://localhost:8000/balance?user_id=2"


# ------------------------------------------
# 7Ô∏è‚É£ WITHDRAW 200
# ------------------------------------------
curl -X POST "http://localhost:8000/withdraw?user_id=2&amount=200"


# ------------------------------------------
# 8Ô∏è‚É£ CHECK BALANCE AGAIN
# ------------------------------------------
curl "http://localhost:8000/balance?user_id=2"


# ------------------------------------------
# 9Ô∏è‚É£ LIST ALL CUSTOMERS (ADMIN ONLY)
# ------------------------------------------
curl "http://localhost:8000/admin/customers?user_id=1"


# ------------------------------------------
# üîü DELETE CUSTOMER (ADMIN ONLY)
# ------------------------------------------
curl -X DELETE "http://localhost:8000/admin/delete-user?admin_id=1&user_id=2"


# ------------------------------------------
# 1Ô∏è‚É£1Ô∏è‚É£ TRY DELETE AS CUSTOMER (SHOULD FAIL)
# ------------------------------------------
curl -X DELETE "http://localhost:8000/admin/delete-user?admin_id=2&user_id=3"


# ------------------------------------------
# 1Ô∏è‚É£2Ô∏è‚É£ WITHDRAW MORE THAN BALANCE (ERROR TEST)
# ------------------------------------------
curl -X POST "http://localhost:8000/withdraw?user_id=2&amount=100000"


#############################################
# END OF TEST COMMANDS
#############################################


############################################################
# DOCKER COMMANDS - BANK BACKEND PROJECT
############################################################


##############################
# IMAGE COMMANDS
##############################

# Build Docker image
docker build -t bank-backend .

# List all images
docker images

# Remove image
docker rmi bank-backend

# Remove unused images
docker image prune


##############################
# CONTAINER RUNNING
##############################

# Run container (new container)
docker run -p 8001:8000 bank-backend

# Run container with name
docker run -p 8001:8000 --name bank-app bank-backend

# Run container in background (detached mode)
docker run -d -p 8001:8000 --name bank-app bank-backend


##############################
# CONTAINER STATUS
##############################

# Show running containers
docker ps

# Show all containers (running + stopped)
docker ps -a


##############################
# START / STOP / REMOVE
##############################

# Stop container
docker stop bank-app

# Start existing container
docker start bank-app

# Restart container
docker restart bank-app

# Remove container
docker rm bank-app

# Remove all stopped containers
docker container prune


##############################
# LOGS & DEBUGGING
##############################

# Show container logs
docker logs bank-app

# Follow logs (live logs)
docker logs -f bank-app

# Inspect container details
docker inspect bank-app

# Show resource usage (CPU / Memory)
docker stats


##############################
# EXEC INTO CONTAINER
##############################

# Enter container shell
docker exec -it bank-app /bin/bash

# Run command inside container
docker exec -it bank-app ls


##############################
# NETWORK & PORTS
##############################

# Check port mapping
docker ps

# Inspect networking
docker inspect bank-app

# Test API from host
curl http://localhost:8001

# Test API inside container
docker exec -it bank-app curl http://localhost:8000


##############################
# VOLUME (PERSIST DATABASE)
##############################

# Run container with volume mapping
docker run -d -p 8001:8000 \
  -v $(pwd)/data:/app \
  --name bank-app \
  bank-backend

# List volumes
docker volume ls

# Remove unused volumes
docker volume prune


##############################
# CLEANUP EVERYTHING
##############################

# Stop all containers
docker stop $(docker ps -q)

# Remove all containers
docker rm $(docker ps -aq)

# Remove all images
docker rmi $(docker images -q)

# System cleanup (VERY POWERFUL)
docker system prune -a


############################################################
# END OF DOCKER COMMANDS
############################################################

------------------------------------------------
END OF FILE
------------------------------------------------
